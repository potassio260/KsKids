
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Topbar con Navegación por Categorías - Ks Kids Shop</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Lexend', sans-serif;
      height: 2000px; /* For scroll testing */
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      overflow-x: hidden;
    }

    .content {
      max-width: 1200px;
      margin: 0 auto;
    }

    .main {
      margin-top: 120px;
      padding: 20px;
      background-color: #f0f0f0;
      transition: margin-top 0.3s ease;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      box-sizing: border-box;
    }

    /* Discount Banner */
    .discount-banner {
      height: 160px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 20px;
      margin-bottom: 30px;
      overflow: hidden;
      position: relative;
    }

    .discount-title {
      color: white;
      font-size: 42px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    /* Product Carousel */
    .product-carousel {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 40px auto;
      position: relative;
      max-width: 800px;
      touch-action: pan-y;
    }

    .carousel-container {
      display: flex;
      align-items: center;
      gap: 20px;
      width: 100%;
      justify-content: center;
    }

    .side-image {
      width: 80px;
      height: 120px;
      border-radius: 15px;
      object-fit: cover;
      opacity: 0.6;
      transition: all 0.5s ease;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .side-image:hover {
      opacity: 0.8;
      transform: scale(1.05);
    }

    .main-product {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0 20px;
    }

    .main-imagebox {
      width: 300px;
      height: 400px;
      border-radius: 25px;
      overflow: hidden;
      box-shadow: 0 15px 35px rgba(0,0,0,0.2);
      position: relative;
      cursor: pointer;
    }

    .main-image {
      width: 100%;
      height: 70%;
      object-fit: cover;
      transition: all 0.3s ease;
    }

    .product-info {
      background: white;
      width: 100%;
      height: 30%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 15px;
      position: absolute;
      bottom: 0;
    }

    .product-title {
      font-size: 20px;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 8px;
      text-align: center;
    }

    .product-price {
      font-size: 24px;
      font-weight: 800;
      color: #e74c3c;
    }

    .arrow-btn {
      background: white;
      border: none;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      font-size: 20px;
      color: #333;
    }

    .arrow-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    /* Products Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-top: 50px;
    }

    .product-box {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .product-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0,0,0,0.15);
    }

    .product-image {
      width: 100%;
      height: 200px;
      overflow: hidden;
      position: relative;
    }

    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .product-box:hover .product-image img {
      transform: scale(1.05);
    }

    .price-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 8px 12px;
      border-radius: 15px;
      font-weight: bold;
    }

    .stock-status {
      position: absolute;
      top: 15px;
      left: 15px;
      padding: 6px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
    }

    .in-stock { background: #2ecc71; color: white; }
    .low-stock { background: #f39c12; color: white; }
    .out-of-stock { background: #e74c3c; color: white; }

    .product-content {
      padding: 20px;
    }

    .product-name {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 8px;
      color: #2c3e50;
    }

    .product-description {
      color: #7f8c8d;
      font-size: 14px;
      line-height: 1.4;
      margin-bottom: 12px;
    }

    .product-category {
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
      color: #2c3e50;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
      display: inline-block;
    }

    /* Notification */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
      color: white;
      padding: 12px 20px;
      border-radius: 10px;
      z-index: 1001;
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.4s ease;
      box-shadow: 0 5px 15px rgba(46,204,113,0.3);
    }

    .notification.show {
      opacity: 1;
      transform: translateX(0);
    }

    /* TOPBAR CORE STYLING */
    .topbar {
      height: 70px;
      display: flex;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background-color: #ffffff;
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      flex-wrap: wrap;
      transition: height 0.3s ease;
    }

    /* CATEGORY NAVIGATION BAR */
    .category-nav {
      height: 50px;
      display: flex;
      align-items: center;
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      background-color: #f8f9fa;
      z-index: 999;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      overflow-x: auto;
      overflow-y: hidden;
      white-space: nowrap;
      scrollbar-width: none;
      -ms-overflow-style: none;
      transition: top 0.3s ease;
    }

    .category-nav::-webkit-scrollbar {
      display: none;
    }

    .category-nav-container {
      display: flex;
      align-items: center;
      padding: 0 20px;
      gap: 5px;
      min-width: 100%;
    }

    .category-item {
      display: flex;
      align-items: center;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
      font-weight: 500;
      color: #555;
      background-color: transparent;
      white-space: nowrap;
      flex-shrink: 0;
      border: 1px solid transparent;
    }

    .category-item:hover {
      background-color: #e9ecef;
      color: #333;
      transform: translateY(-1px);
    }

    .category-item.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .category-item.active:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
    }

    .category-icon {
      margin-right: 6px;
      font-size: 16px;
    }

    /* SCROLL INDICATORS */
    .scroll-indicator {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 30px;
      height: 30px;
      background: rgba(255,255,255,0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      z-index: 1001;
    }

    .scroll-indicator:hover {
      background: rgba(255,255,255,1);
      transform: translateY(-50%) scale(1.1);
    }

    .scroll-indicator.left {
      left: 10px;
    }

    .scroll-indicator.right {
      right: 10px;
    }

    /* TOPBAR SECTIONS */
    .topbar-section {
      display: flex;
      align-items: center;
    }
    
    .topbar-section.left {
      margin-left: 5px;
      flex: 0.35;
    }

    .topbar-section.center {
      flex: 1;
      display: flex;
      justify-content: center;
      order: 2;
    }

    .topbar-section.right {
      position: absolute;
      right: 5px;
      display: flex;
      align-items: center;
    }

    /* SEARCH BAR STYLING */
    .search-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 14px;
      border-radius: 28px;
      background: #f6f6f6;
      height: 23px;
    }

    .search-input {
      font-size: 17px;
      font-family: 'Lexend', sans-serif;
      color: #333;
      width: 32vw;
      margin-left: 10px;
      outline: none;
      border: none;
      background: transparent;
    }

    .search-input::placeholder {
      color: rgba(0, 0, 0, 0.25);
    }

    /* BUTTON STYLING */
    .buttons,
    .search,
    .arrow-button {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 40px;
      width: 40px;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .buttons:hover,
    .search:hover,
    .arrow-button:hover {
      background-color: #dfd7d7;
      transform: scale(1.1);
    }

    /* MAIN CONTENT OFFSET */
    .main {
      margin-top: 120px; /* Adjusted for both topbar and category nav */
      height: 100%;
      background-color: #f0f0f0;
      padding: 20px;
      width: 100%;
      transition: margin-top 0.3s ease;
    }

    /* NOTIFICATION STYLING */
    .notification {
      position: fixed;
      top: 130px; /* Adjusted for category nav */
      right: 20px;
      background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      z-index: 1001;
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 10px 25px rgba(46,204,113,0.3);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.2);
    }

    .notification.show {
      opacity: 1;
      transform: translateX(0);
    }

    /* MENU OVERLAY STYLING */
    .menu-overlay {
      position: fixed;
      top: 0;
      left: -300px;
      width: 250px;
      height: 100vh;
      z-index: 1002;
      transition: left 0.3s ease;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      background-color: white;
      padding: 20px 20px 20px 20px; /* Adjusted for category nav */
      overflow-y: auto;
    }

    .menu-overlay.open {
      left: 0;
    }

    .menu-item {
      padding: 15px 0;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: background-color 0.3s ease;
      font-family: 'Lexend', sans-serif;
      font-size: 16px;
      color: #333;
    }

    .menu-item:hover {
      background-color: #f8f8f8;
      padding-left: 10px;
    }

    /* MENU BACKDROP */
    .menu-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0,0,0,0.5);
      z-index: 1001;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .menu-backdrop.open {
      opacity: 1;
      visibility: visible;
    }

    /* LOADING STATE */
    .loading {
      opacity: 0.5;
      pointer-events: none;
    }

    .discount-banner,
    .product-carousel,
    .products-grid {
      margin-left: auto;
      margin-right: auto;
    }

    @media (min-width: 1321px) {
      .topbar-section.left .buttons {
        display: none;
      }
    }

    @media (max-width: 1320px) {

      /* Hide category nav on smaller screens */
      .category-nav {
        display: none;
      }

      /* MAIN CONTENT OFFSET */
      .main {
        margin-top: 70px;
        height: 100%;
        background-color: #f0f0f0;
        padding: 20px;
        width: 100%;
        transition: margin-top 0.3s ease;
      }
      
    }

    /* RESPONSIVE DESIGN - TABLET/MOBILE */
    @media (max-width: 870px) {

      .main {
        margin-top: 120px; /* Back to single topbar height */
        padding: 15px; /* Slightly less padding on mobile */
        max-width: 100%;
      }

      .topbar {
        height: 120px;
        padding: 10px 0;
      }

       .discount-title {
        font-size: 32px;
      }

      .carousel-container {
        flex-direction: column;
        gap: 15px;
      }

      .side-image {
        display: none;
      }

      .main-imagebox {
        width: 280px;
        height: 350px;
      }

      .arrow-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 2;
      }

      .arrow-btn.prev {
        left: 10px;
      }

      .arrow-btn.next {
        right: 10px;
      }

      .products-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      /* Hide category nav on smaller screens */
      .category-nav {
        display: none;
      }

      .topbar-section.left {
        flex: 1;
        order: 1;
      }

      .topbar-section.center {
        width: 100%;
        order: 3;
        margin-top: 10px;
        padding: 0 10px;
      }

      .topbar-section.right {
        position: static;
        order: 2;
        margin-left: auto;
        margin-right: 5px;
      }

      .search-input {
        width: calc(100vw - 100px);
        min-width: 200px;
      }

      .search-bar {
        width: 80%;
        max-width: none;
      }

      .main {
        margin-top: 120px; /* Back to single topbar height */
      }

      .notification {
        top: 130px;
      }

      .menu-overlay {
        padding-top: 120px;
      }
    }

    /* RESPONSIVE DESIGN - MOBILE */
    @media (max-width: 480px) {
      .topbar {
        height: 130px;
      }

      /* Keep category nav hidden on mobile */
      .category-nav {
        display: none;
      }

      .search-input {
        width: calc(100vw - 80px);
        font-size: 16px;
      }

      .main {
        margin-top: 130px;
      }

      .notification {
        top: 140px;
        right: 10px;
        left: 10px;
        transform: translateY(-100%);
      }

      .notification.show {
        transform: translateY(0);
      }

      .arrow-button {
        display: none;
      }

      .scroll-indicator {
        width: 25px;
        height: 25px;
      }

      .menu-overlay {
        padding-top: 130px;
      }
    }

    /* SIDEBAR TOUCH SUPPORT */
    .menu-overlay {
      -webkit-overflow-scrolling: touch;
      touch-action: pan-y;
    }

    /* ADDITIONAL INTERACTIVE EFFECTS */
    .topbar-section.left h1 {
      margin: 0 15px;
      font-size: 24px;
      color: #333;
      font-weight: 700;
      transition: color 0.3s ease;
    }

    .topbar-section.left h1:hover {
      color: #667eea;
    }

    /* SMOOTH SCROLLBAR */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }

    /* DEMO CONTENT */
    .demo-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .demo-card {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .demo-title {
      color: #333;
      font-size: 28px;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .demo-text {
      color: #666;
      line-height: 1.6;
      font-size: 16px;
    }
  </style>
</head>
<body>

<!-- TOPBAR -->
<div class="topbar">
    <div class="topbar-section left">
        <div class="buttons" onclick="toggleMenu()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </div>
        <h1>Ks kids</h1>
    </div>

    <div class="topbar-section center">
        <div class="search-bar">
            <input type="text" placeholder="Buscar..." class="search-input" id="searchInput" />
            <div class="search" onclick="performSearch()">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
            </div>
        </div>
    </div>

    <div class="topbar-section right">
        <div class="buttons" onclick="showNotification('¡Tienes 3 notificaciones nuevas!')">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
            </svg>
        </div>
        <div class="buttons" style="margin: 0 15px;" onclick="showNotification('¡Atención al cliente disponible 24/7!')">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
        </div>
    </div>
</div>

<!-- CATEGORY NAVIGATION -->
<div class="category-nav" id="categoryNav">
    <div class="category-nav-container" id="categoryContainer">
        <div class="category-item active" onclick="selectCategory(this, 'todos')" data-category="todos">
            <span class="category-icon">🏠</span>
            Todos
        </div>
        <div class="category-item" onclick="selectCategory(this, 'ropa-bebe')" data-category="ropa-bebe">
            <span class="category-icon">👶</span>
            Ropa de bebé
        </div>
        <div class="category-item" onclick="selectCategory(this, 'ninos')" data-category="ninos">
            <span class="category-icon">👧</span>
            De niños/as
        </div>
        <div class="category-item" onclick="selectCategory(this, 'chicos')" data-category="chicos">
            <span class="category-icon">🧒</span>
            De chicos/as
        </div>
        <div class="category-item" onclick="selectCategory(this, 'paraguas')" data-category="paraguas">
            <span class="category-icon">☂️</span>
            Paraguas
        </div>
        <div class="category-item" onclick="selectCategory(this, 'juguetes')" data-category="juguetes">
            <span class="category-icon">🧸</span>
            Juguetes
        </div>
        <div class="category-item" onclick="selectCategory(this, 'calzado')" data-category="calzado">
            <span class="category-icon">👟</span>
            Calzado
        </div>
        <div class="category-item" onclick="selectCategory(this, 'toallas-gorras-banadores')" data-category="toallas-gorras-banadores">
            <span class="category-icon">🏖️</span>
            Toallas/gorras/bañadores
        </div>
        <div class="category-item" onclick="selectCategory(this, 'bufandas-batas')" data-category="bufandas-batas">
            <span class="category-icon">🧣</span>
            Bufandas/batas
        </div>
    </div>
</div>

<!-- MENU OVERLAY -->
<div class="menu-backdrop" id="menuBackdrop" onclick="toggleMenu()"></div>
<div class="menu-overlay" id="menuOverlay">
    <!-- Categories will be populated here on mobile -->
</div>

<!-- NOTIFICATION -->
<div class="notification" id="notification"></div>

<!-- Main Content -->
  <div class="main">
    <!-- Discount Banner -->
    <div class="discount-banner">
      <div class="discount-title">¡Descuentos!</div>
    </div>

    <!-- Product Carousel -->
    <div class="product-carousel" id="productCarousel">
      <button class="arrow-btn prev" onclick="previousProduct()">‹</button>
      
      <div class="carousel-container">
        <img src="images\516204036_1213616423896700_999017950145108751_n.jpg" class="side-image" id="sideLeft" alt="Previous" />
        
        <div class="main-product">
          <div class="main-imagebox" id="mainImageBox">
            <img src="images\516891834_1213616377230038_4997410880746407739_n.jpg" alt="Producto principal" class="main-image" id="mainImage" />
            <div class="product-info">
              <div class="product-title" id="productTitle">Osito de Peluche</div>
              <div class="product-price" id="productPrice">19,99 €</div>
            </div>
          </div>
        </div>
        
        <img src="images\518084926_1213616383896704_1024783052948639362_n.jpg" class="side-image" id="sideRight" alt="Next" />
      </div>

      <button class="arrow-btn next" onclick="nextProduct()">›</button>
    </div>

    <!-- Products Grid -->
    <div class="products-grid">
      <div class="product-box">
        <div class="product-image">
          <img src="images\516204036_1213616423896700_999017950145108751_n.jpg" alt="Body de algodón" />
          <div class="price-badge">€12.99</div>
          <div class="stock-status in-stock">En stock</div>
        </div>
        <div class="product-content">
          <h3 class="product-name">Body de Algodón Orgánico</h3>
          <p class="product-description">Suave body de algodón 100% orgánico, perfecto para la piel delicada del bebé.</p>
          <span class="product-category">Ropa bebé</span>
        </div>
      </div>

      <div class="product-box">
        <div class="product-image">
          <img src="images\518352262_1213616443896698_818288500639219176_n.jpg" alt="Conjunto niño" />
          <div class="price-badge">€24.99</div>
          <div class="stock-status in-stock">En stock</div>
        </div>
        <div class="product-content">
          <h3 class="product-name">Conjunto Camiseta + Pantalón</h3>
          <p class="product-description">Conjunto cómodo y resistente para el día a día con estampado divertido.</p>
          <span class="product-category">Niños/as</span>
        </div>
      </div>

      <div class="product-box">
        <div class="product-image">
          <img src="images\516204036_1213616423896700_999017950145108751_n.jpg" alt="Paraguas infantil" />
          <div class="price-badge">€8.99</div>
          <div class="stock-status low-stock">Pocos</div>
        </div>
        <div class="product-content">
          <h3 class="product-name">Paraguas Infantil Arcoíris</h3>
          <p class="product-description">Paraguas colorido con diseño de arcoíris, ligero y fácil de manejar.</p>
          <span class="product-category">Accesorios</span>
        </div>
      </div>

      <div class="product-box">
        <div class="product-image">
          <img src="images\518352262_1213616443896698_818288500639219176_n.jpg" alt="Peluche oso" />
          <div class="price-badge">€19.99</div>
          <div class="stock-status in-stock">En stock</div>
        </div>
        <div class="product-content">
          <h3 class="product-name">Osito de Peluche Suave</h3>
          <p class="product-description">Adorable osito de peluche con textura súper suave, ideal para abrazar.</p>
          <span class="product-category">Juguetes</span>
        </div>
      </div>

      <div class="product-box">
        <div class="product-image">
          <img src="images\518352262_1213616443896698_818288500639219176_n.jpg" alt="Zapatillas infantiles" />
          <div class="price-badge">€29.99</div>
          <div class="stock-status in-stock">En stock</div>
        </div>
        <div class="product-content">
          <h3 class="product-name">Zapatillas Deportivas</h3>
          <p class="product-description">Zapatillas cómodas y transpirables con velcro, perfectas para correr.</p>
          <span class="product-category">Calzado</span>
        </div>
      </div>

      <div class="product-box">
        <div class="product-image">
          <img src="images\518352262_1213616443896698_818288500639219176_n.jpg" alt="Bufanda infantil" />
          <div class="price-badge">€14.99</div>
          <div class="stock-status out-of-stock">Agotado</div>
        </div>
        <div class="product-content">
          <h3 class="product-name">Bufanda de Lana Suave</h3>
          <p class="product-description">Bufanda tejida en lana suave y cálida, perfecta para el invierno.</p>
          <span class="product-category">Invierno</span>
        </div>
      </div>
    </div>
  </div>

<script>
  const products = [
    {
        name: "Osito de Peluche",
        price: "19,99 €",
        image: "images/516204036_1213616423896700_999017950145108751_n.jpg"
    },
    {
        name: "Body de Algodón",
        price: "12,99 €",
        image: "images/516891834_1213616377230038_4997410880746407739_n.jpg"
    },
    {
        name: "Conjunto Niño",
        price: "24,99 €",
        image: "images/518084926_1213616383896704_1024783052948639362_n.jpg"
    },
    {
        name: "Paraguas Infantil",
        price: "8,99 €",
        image: "images/518088135_1213616500563359_2083818226617871534_n.jpg"
    },
    {
        name: "Zapatillas Deportivas",
        price: "29,99 €",
        image: "images/518352262_1213616443896698_818288500639219176_n.jpg"
    }
];
    let isMenuOpen = false;
    let currentProductIndex = 0;
    let isTransitioning = false;

    // Touch handling for carousel
    let startX = 0;
    let startY = 0;
    let isDragging = false;

    // Notification system
    function showNotification(message) {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // Product carousel functionality
    function updateProduct() {
      if (isTransitioning) return;
      isTransitioning = true;

      const product = products[currentProductIndex];
      const prevIndex = (currentProductIndex - 1 + products.length) % products.length;
      const nextIndex = (currentProductIndex + 1) % products.length;

      // Update main product with smooth transition
      const mainImage = document.getElementById('mainImage');
      const productTitle = document.getElementById('productTitle');
      const productPrice = document.getElementById('productPrice');
      const sideLeft = document.getElementById('sideLeft');
      const sideRight = document.getElementById('sideRight');

      // Fade out
      mainImage.style.opacity = '0';
      
      setTimeout(() => {
        // Update content
        mainImage.src = product.image;
        mainImage.alt = product.name;
        productTitle.textContent = product.name;
        productPrice.textContent = product.price;
        
        // Update side images
        sideLeft.src = products[prevIndex].image.replace('300&h=400', '120&h=160');
        sideRight.src = products[nextIndex].image.replace('300&h=400', '120&h=160');
        
        // Fade in
        setTimeout(() => {
        mainImage.style.opacity = '1';
      }, 50);
        isTransitioning = false;
      }, 300);
    }

    function nextProduct() {
      if (isTransitioning) return;
      currentProductIndex = (currentProductIndex + 1) % products.length;
      updateProduct();
    }

    function previousProduct() {
      if (isTransitioning) return;
      currentProductIndex = (currentProductIndex - 1 + products.length) % products.length;
      updateProduct();
    }

    // Touch events for carousel swipe
    function initializeSwipe() {
      const carousel = document.getElementById('productCarousel');
      
      carousel.addEventListener('touchstart', handleTouchStart, { passive: true });
      carousel.addEventListener('touchmove', handleTouchMove, { passive: false });
      carousel.addEventListener('touchend', handleTouchEnd, { passive: true });
    }

    function handleTouchStart(e) {
      const touch = e.touches[0];
      startX = touch.clientX;
      startY = touch.clientY;
      isDragging = true;
    }

    function handleTouchMove(e) {
      if (!isDragging) return;
      
      const touch = e.touches[0];
      const deltaX = touch.clientX - startX;
      const deltaY = Math.abs(touch.clientY - startY);
      
      // Prevent scrolling if horizontal swipe
      if (Math.abs(deltaX) > deltaY && Math.abs(deltaX) > 20) {
        e.preventDefault();
      }
    }

    function handleTouchEnd(e) {
      if (!isDragging) return;
      
      const touch = e.changedTouches[0];
      const deltaX = touch.clientX - startX;
      const deltaY = Math.abs(touch.clientY - startY);
      
      // Check if it's a horizontal swipe
      if (Math.abs(deltaX) > 50 && Math.abs(deltaX) > deltaY) {
        if (deltaX > 0) {
          previousProduct();
        } else {
          nextProduct();
        }
      }
      
      isDragging = false;
    }

    // Auto-rotate carousel
    function startAutoRotate() {
      setInterval(() => {
        if (!isTransitioning && !isDragging) {
          nextProduct();
        }
      }, 5000);
    }

    // Click handlers for side images
    function initializeSideImageClicks() {
      const sideLeft = document.getElementById('sideLeft');
      const sideRight = document.getElementById('sideRight');
      
      sideLeft.addEventListener('click', previousProduct);
      sideRight.addEventListener('click', nextProduct);
    }

    // Product box click handlers
    function initializeProductClicks() {
      const productBoxes = document.querySelectorAll('.product-box');
      productBoxes.forEach((box, index) => {
        box.addEventListener('click', () => {
          const productName = box.querySelector('.product-name').textContent;
          showNotification(`Ver detalles de: ${productName}`);
        });
      });
    }

    // Handle window resize
    window.addEventListener('resize', function() {
      // Adjust carousel for orientation changes
      if (window.innerWidth <= 768) {
        const sideImages = document.querySelectorAll('.side-image');
        sideImages.forEach(img => img.style.display = 'none');
      } else {
        const sideImages = document.querySelectorAll('.side-image');
        sideImages.forEach(img => img.style.display = 'block');
      }
    });

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      updateProduct();
      initializeSwipe();
      initializeSideImageClicks();
      initializeProductClicks();
      startAutoRotate();
      
      // Add loading animation
      document.body.style.opacity = '0';
      setTimeout(() => {
        document.body.style.transition = 'opacity 0.5s ease';
        document.body.style.opacity = '1';
      }, 100);
    });

    // Categories data in Spanish
    const categories = [
        { id: 'todos', icon: '🏠', name: 'Todos' },
        { id: 'ropa-bebe', icon: '👶', name: 'Ropa de bebé' },
        { id: 'ninos', icon: '👧', name: 'De niños/as' },
        { id: 'chicos', icon: '🧒', name: 'De chicos/as' },
        { id: 'paraguas', icon: '☂️', name: 'Paraguas' },
        { id: 'juguetes', icon: '🧸', name: 'Juguetes' },
        { id: 'calzado', icon: '👟', name: 'Calzado' },
        { id: 'toallas-gorras-banadores', icon: '🏖️', name: 'Toallas/gorras/bañadores' },
        { id: 'bufandas-batas', icon: '🧣', name: 'Bufandas/batas' }
    ];

    // Check if we should show categories in menu (mobile view)
    function shouldShowCategoriesInMenu() {
        return window.innerWidth <= 1320;
    }
    // Populate menu with categories on mobile
    function populateMenu() {
        const menuOverlay = document.getElementById('menuOverlay');
        
        if (shouldShowCategoriesInMenu()) {
            // Clear existing content and add categories
            menuOverlay.innerHTML = '';
            
            categories.forEach(category => {
                const menuItem = document.createElement('div');
                menuItem.className = 'menu-item';
                menuItem.innerHTML = `${category.icon} ${category.name}`;
                menuItem.onclick = () => {
                    selectCategoryFromMenu(category.id, category.name);
                };
                menuOverlay.appendChild(menuItem);
            });
        } else {
            // On desktop, menu is empty as requested
            menuOverlay.innerHTML = '';
        }
    }

    // Handle category selection from menu
    function selectCategoryFromMenu(categoryId, categoryName) {
        // Update desktop category if visible
        if (!shouldShowCategoriesInMenu()) {
            const categoryElements = document.querySelectorAll('.category-item');
            categoryElements.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-category') === categoryId) {
                    item.classList.add('active');
                }
            });
        }
        
        showNotification(`Selected category: ${categoryName}`);
        toggleMenu();
    }

    // Menu functionality
    function toggleMenu() {
        isMenuOpen = !isMenuOpen;
        const menuOverlay = document.getElementById('menuOverlay');
        const menuBackdrop = document.getElementById('menuBackdrop');
        
        // Populate menu content based on screen size
        populateMenu();
        
        if (isMenuOpen) {
            menuOverlay.classList.add('open');
            menuBackdrop.classList.add('open');
        } else {
            menuOverlay.classList.remove('open');
            menuBackdrop.classList.remove('open');
        }
    }

    // Category selection
    function selectCategory(element, categoryId) {
        // Remove active class from all categories
        const allCategories = document.querySelectorAll('.category-item');
        allCategories.forEach(item => item.classList.remove('active'));
        
        // Add active class to clicked category
        element.classList.add('active');
        
        // Show notification with selected category
        const categoryName = element.textContent.trim();
        showNotification(`Selected category: ${categoryName}`);
        
        // Scroll the selected category into view
        element.scrollIntoView({
            behavior: 'smooth',
            block: 'nearest',
            inline: 'center'
        });
    }

    // Category scrolling functionality
    function scrollCategories(direction) {
        const container = document.getElementById('categoryContainer');
        const scrollAmount = 200;
        
        if (direction === 1) {
            container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        } else {
            container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        }
        
        // Update scroll indicators
        setTimeout(updateScrollIndicators, 300);
    }

    // Update scroll indicators visibility
    function updateScrollIndicators() {
        const container = document.getElementById('categoryContainer');
        const leftIndicator = document.getElementById('scrollLeft');
        const rightIndicator = document.getElementById('scrollRight');
        
        if (container.scrollLeft <= 10) {
            leftIndicator.style.opacity = '0.3';
            leftIndicator.style.pointerEvents = 'none';
        } else {
            leftIndicator.style.opacity = '1';
            leftIndicator.style.pointerEvents = 'auto';
        }
        
        if (container.scrollLeft >= container.scrollWidth - container.clientWidth - 10) {
            rightIndicator.style.opacity = '0.3';
            rightIndicator.style.pointerEvents = 'none';
        } else {
            rightIndicator.style.opacity = '1';
            rightIndicator.style.pointerEvents = 'auto';
        }
    }

    // Navigation
    function navigateTo(section) {
        showNotification(`Navigating to ${section}...`);
        toggleMenu();
        
        // Add loading state
        document.body.classList.add('loading');
        setTimeout(() => {
            document.body.classList.remove('loading');
        }, 1000);
    }

    // Search functionality
    function performSearch() {
        const searchInput = document.getElementById('searchInput');
        const query = searchInput.value.trim();
        
        if (query) {
            showNotification(`Searching for: "${query}"`);
            searchInput.value = '';
            
            // Simulate search loading
            const searchButton = document.querySelector('.search');
            searchButton.style.opacity = '0.5';
            setTimeout(() => {
                searchButton.style.opacity = '1';
            }, 1000);
        } else {
            showNotification('Please enter a search term');
        }
    }

    // Search on Enter key
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            performSearch();
        }
    });

    // Notification system
    function showNotification(message) {
        const notification = document.getElementById('notification');
        notification.textContent = message;
        notification.classList.add('show');
        
        setTimeout(() => {
            notification.classList.remove('show');
        }, 3000);
    }

    // Close menu when clicking outside
    document.addEventListener('click', function(e) {
        if (isMenuOpen && !e.target.closest('.menu-overlay') && !e.target.closest('.buttons')) {
            toggleMenu();
        }
    });

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && isMenuOpen) {
            toggleMenu();
        }
    });

    // Mobile sidebar touch support
    let sidebarTouchStartX = 0;
    let sidebarTouchStartY = 0;
    let isSidebarSwipeActive = false;

    function handleSidebarTouchStart(e) {
        const touch = e.touches[0];
        sidebarTouchStartX = touch.clientX;
        sidebarTouchStartY = touch.clientY;
        isSidebarSwipeActive = true;
    }

    function handleSidebarTouchMove(e) {
        if (!isSidebarSwipeActive || !isMenuOpen) return;
        
        const touch = e.touches[0];
        const deltaX = touch.clientX - sidebarTouchStartX;
        const deltaY = Math.abs(touch.clientY - sidebarTouchStartY);
        
        if (deltaX < -30 && deltaY < 50) {
            e.preventDefault();
        }
    }

    function handleSidebarTouchEnd(e) {
        if (!isSidebarSwipeActive || !isMenuOpen) return;
        
        const touch = e.changedTouches[0];
        const deltaX = touch.clientX - sidebarTouchStartX;
        const deltaY = Math.abs(touch.clientY - sidebarTouchStartY);
        
        if (deltaX < -50 && deltaY < 100) {
            toggleMenu();
        }
        
        isSidebarSwipeActive = false;
    }

    // Initialize sidebar touch events
    const menuOverlay = document.getElementById('menuOverlay');
    const menuBackdrop = document.getElementById('menuBackdrop');
    
    menuOverlay.addEventListener('touchstart', handleSidebarTouchStart, { passive: false });
    menuOverlay.addEventListener('touchmove', handleSidebarTouchMove, { passive: false });
    menuOverlay.addEventListener('touchend', handleSidebarTouchEnd, { passive: false });
    
    menuBackdrop.addEventListener('touchstart', function(e) {
        e.preventDefault();
    }, { passive: false });
    
    menuBackdrop.addEventListener('touchend', function(e) {
        e.preventDefault();
        if (isMenuOpen) {
            toggleMenu();
        }
    }, { passive: false });

    // Category navigation touch support
    let categoryTouchStartX = 0;
    let isCategorySwipeActive = false;

    document.getElementById('categoryContainer').addEventListener('touchstart', function(e) {
        const touch = e.touches[0];
        categoryTouchStartX = touch.clientX;
        isCategorySwipeActive = true;
    }, { passive: false });

    document.getElementById('categoryContainer').addEventListener('touchmove', function(e) {
        if (!isCategorySwipeActive) return;
        // Allow native scrolling behavior
    }, { passive: true });

    document.getElementById('categoryContainer').addEventListener('touchend', function(e) {
        isCategorySwipeActive = false;
        setTimeout(updateScrollIndicators, 100);
    }, { passive: true });

    // Initialize scroll indicators on load
    window.addEventListener('load', function() {
        updateScrollIndicators();
        
        // Welcome message
        setTimeout(() => {
            showNotification('Enhanced topbar with categories ready! 🎉');
        }, 500);
    });

    // Handle container scroll for indicator updates
    document.getElementById('categoryContainer').addEventListener('scroll', function() {
        updateScrollIndicators();
    });

    // Handle window resize
    window.addEventListener('resize', function() {
        setTimeout(updateScrollIndicators, 100);
    });
</script>

</body>
</html>
